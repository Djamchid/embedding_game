<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu d'Embeddings - 1000 mots fran√ßais</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .game-area {
            background: #f7fafc;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .analogie {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            font-size: 1.3em;
            flex-wrap: wrap;
        }
        
        input[type="text"] {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            min-width: 120px;
            text-align: center;
            transition: all 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            transform: scale(1.05);
        }
        
        .word-suggestions {
            position: absolute;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .suggestion-item {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #f7fafc;
        }
        
        .suggestion-item:hover {
            background: #e6fffa;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 10px 8px;
            font-weight: 600;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .result {
            background: #e6fffa;
            border: 2px solid #4fd1c7;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }
        
        .closest-words {
            background: #fff5f5;
            border: 1px solid #feb2b2;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        
        .word-badge {
            background: #4fd1c7;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .explanation {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        
        .loading {
            text-align: center;
            color: #667eea;
            font-style: italic;
            margin: 20px 0;
        }
        
        .similarity-score {
            background: #e6fffa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† Jeu d'Embeddings S√©mantiques</h1>
        <p class="subtitle">Base de donn√©es : 1000 mots fran√ßais avec embeddings vectoriels</p>
        
        <div class="explanation">
            <strong>üéØ Comment √ßa marche :</strong> Chaque mot est repr√©sent√© par un vecteur de 50 dimensions. 
            L'analogie utilise l'arithm√©tique vectorielle : <code>vecteur(A) - vecteur(B) + vecteur(C) = vecteur(r√©sultat)</code>
            <br><br>
            <strong>üìä Performance :</strong> Recherche dans <span id="wordCount">1000</span> mots fran√ßais par similarit√© cosinus
        </div>
        
        <div class="game-area">
            <div class="analogie">
                <div style="position: relative;">
                    <input type="text" id="wordA" placeholder="roi" autocomplete="off">
                    <div id="suggestionsA" class="word-suggestions" style="display: none;"></div>
                </div>
                <span>est √†</span>
                <div style="position: relative;">
                    <input type="text" id="wordB" placeholder="reine" autocomplete="off">
                    <div id="suggestionsB" class="word-suggestions" style="display: none;"></div>
                </div>
                <span>ce que</span>
                <div style="position: relative;">
                    <input type="text" id="wordC" placeholder="homme" autocomplete="off">
                    <div id="suggestionsC" class="word-suggestions" style="display: none;"></div>
                </div>
                <span>est √†</span>
                <input type="text" id="result" placeholder="?" readonly style="background:#e2e8f0; font-weight: bold;">
            </div>
            
            <div style="text-align: center;">
                <button onclick="calculerAnalogie()">üßÆ Calculer l'analogie</button>
                <button onclick="motAleatoire()">üé≤ Mots al√©atoires</button>
                <button onclick="reset()">üîÑ Reset</button>
            </div>
            
            <div id="loading" class="loading" style="display: none;">
                Calcul en cours...
            </div>
        </div>
        
        <div id="resultSection" class="result">
            <h3>üéØ R√©sultat de l'analogie :</h3>
            <div id="resultText"></div>
            <div id="similarityScore" class="similarity-score"></div>
            <div id="closestWords" class="closest-words">
                <strong>üîç Mots les plus proches dans l'espace vectoriel :</strong>
                <div id="wordList" class="word-list"></div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <strong>üìà Analogies test√©es</strong>
                <div id="totalAnalogies" style="font-size: 1.5em; color: #667eea;">0</div>
            </div>
            <div class="stat-card">
                <strong>‚úÖ R√©ussites</strong>
                <div id="successRate" style="font-size: 1.5em; color: #48bb78;">0%</div>
            </div>
            <div class="stat-card">
                <strong>üèÜ Score moyen</strong>
                <div id="averageScore" style="font-size: 1.5em; color: #ed8936;">0.0</div>
            </div>
        </div>
    </div>

    <script>
        // Base de donn√©es de 1000 mots fran√ßais avec embeddings simul√©s coh√©rents
        let embeddings = {};
        let vocabulary = [];
        let stats = {
            total: 0,
            successes: 0,
            scoreSum: 0
        };
        
        // G√©n√©rer des embeddings coh√©rents par clusters s√©mantiques
        function generateSemanticEmbeddings() {
            const words = {
                // Genre et relations familiales
                "homme": [0.8, 0.1, 0.2, 0.7, 0.3, 0.1, 0.6, 0.9, 0.2, 0.4],
                "femme": [0.8, 0.9, 0.2, 0.7, 0.3, 0.1, 0.6, 0.1, 0.2, 0.4],
                "roi": [0.9, 0.1, 0.8, 0.9, 0.7, 0.2, 0.8, 0.9, 0.6, 0.7],
                "reine": [0.9, 0.9, 0.8, 0.9, 0.7, 0.2, 0.8, 0.1, 0.6, 0.7],
                "p√®re": [0.7, 0.1, 0.6, 0.8, 0.9, 0.8, 0.7, 0.9, 0.3, 0.6],
                "m√®re": [0.7, 0.9, 0.6, 0.8, 0.9, 0.8, 0.7, 0.1, 0.3, 0.6],
                "fils": [0.6, 0.1, 0.4, 0.7, 0.8, 0.9, 0.5, 0.9, 0.2, 0.5],
                "fille": [0.6, 0.9, 0.4, 0.7, 0.8, 0.9, 0.5, 0.1, 0.2, 0.5],
                "fr√®re": [0.6, 0.1, 0.5, 0.6, 0.7, 0.7, 0.6, 0.9, 0.3, 0.5],
                "s≈ìur": [0.6, 0.9, 0.5, 0.6, 0.7, 0.7, 0.6, 0.1, 0.3, 0.5],
                
                // G√©ographie
                "Paris": [0.2, 0.8, 0.9, 0.3, 0.1, 0.2, 0.9, 0.5, 0.8, 0.7],
                "France": [0.1, 0.7, 0.8, 0.2, 0.1, 0.1, 0.8, 0.4, 0.7, 0.6],
                "Londres": [0.3, 0.8, 0.9, 0.4, 0.2, 0.3, 0.9, 0.6, 0.8, 0.8],
                "Angleterre": [0.2, 0.7, 0.8, 0.3, 0.2, 0.2, 0.8, 0.5, 0.7, 0.7],
                "Berlin": [0.4, 0.8, 0.9, 0.5, 0.3, 0.4, 0.9, 0.7, 0.8, 0.9],
                "Allemagne": [0.3, 0.7, 0.8, 0.4, 0.3, 0.3, 0.8, 0.6, 0.7, 0.8],
                "Rome": [0.5, 0.8, 0.9, 0.6, 0.4, 0.5, 0.9, 0.8, 0.8, 0.9],
                "Italie": [0.4, 0.7, 0.8, 0.5, 0.4, 0.4, 0.8, 0.7, 0.7, 0.8],
                "Madrid": [0.6, 0.8, 0.9, 0.7, 0.5, 0.6, 0.9, 0.9, 0.8, 0.9],
                "Espagne": [0.5, 0.7, 0.8, 0.6, 0.5, 0.5, 0.8, 0.8, 0.7, 0.8],
                
                // Animaux et sons
                "chien": [0.7, 0.3, 0.1, 0.8, 0.6, 0.9, 0.2, 0.4, 0.7, 0.3],
                "chat": [0.6, 0.4, 0.1, 0.7, 0.5, 0.8, 0.2, 0.3, 0.6, 0.4],
                "aboyer": [0.8, 0.2, 0.0, 0.9, 0.7, 0.9, 0.1, 0.5, 0.8, 0.2],
                "miauler": [0.7, 0.3, 0.0, 0.8, 0.6, 0.8, 0.1, 0.4, 0.7, 0.3],
                "cheval": [0.9, 0.3, 0.2, 0.9, 0.8, 0.9, 0.3, 0.6, 0.9, 0.4],
                "hennir": [0.9, 0.2, 0.1, 0.9, 0.9, 0.9, 0.2, 0.7, 0.9, 0.3],
                "oiseau": [0.3, 0.7, 0.8, 0.4, 0.2, 0.5, 0.9, 0.8, 0.3, 0.7],
                "chanter": [0.2, 0.8, 0.9, 0.3, 0.1, 0.4, 0.9, 0.9, 0.2, 0.8],
                
                // Couleurs
                "rouge": [0.9, 0.1, 0.1, 0.8, 0.0, 0.0, 0.7, 0.2, 0.9, 0.1],
                "rose": [0.8, 0.6, 0.6, 0.7, 0.5, 0.5, 0.6, 0.7, 0.8, 0.6],
                "bleu": [0.1, 0.1, 0.9, 0.2, 0.0, 0.8, 0.1, 0.3, 0.1, 0.9],
                "cyan": [0.0, 0.7, 0.9, 0.1, 0.6, 0.8, 0.0, 0.8, 0.0, 0.9],
                "vert": [0.0, 0.9, 0.0, 0.1, 0.8, 0.0, 0.2, 0.9, 0.0, 0.2],
                "jaune": [0.9, 0.9, 0.0, 0.8, 0.8, 0.0, 0.7, 0.9, 0.9, 0.0],
                "noir": [0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0],
                "blanc": [0.9, 0.9, 0.9, 0.8, 0.9, 0.9, 0.9, 0.8, 0.9, 0.9],
                
                // Tailles
                "grand": [0.9, 0.8, 0.7, 0.9, 0.8, 0.6, 0.8, 0.7, 0.9, 0.8],
                "petit": [0.1, 0.2, 0.3, 0.1, 0.2, 0.4, 0.2, 0.3, 0.1, 0.2],
                "√©norme": [0.9, 0.9, 0.8, 0.9, 0.9, 0.7, 0.9, 0.8, 0.9, 0.9],
                "minuscule": [0.0, 0.1, 0.2, 0.0, 0.1, 0.3, 0.1, 0.2, 0.0, 0.1],
                "haut": [0.8, 0.9, 0.6, 0.8, 0.9, 0.5, 0.7, 0.6, 0.8, 0.9],
                "bas": [0.2, 0.1, 0.4, 0.2, 0.1, 0.5, 0.3, 0.4, 0.2, 0.1],
                
                // Professions et outils
                "m√©decin": [0.5, 0.6, 0.7, 0.8, 0.9, 0.7, 0.6, 0.5, 0.8, 0.7],
                "st√©thoscope": [0.4, 0.5, 0.6, 0.7, 0.8, 0.6, 0.5, 0.4, 0.7, 0.6],
                "chef": [0.6, 0.5, 0.4, 0.7, 0.8, 0.9, 0.3, 0.2, 0.6, 0.5],
                "couteau": [0.5, 0.4, 0.3, 0.6, 0.7, 0.8, 0.2, 0.1, 0.5, 0.4],
                "professeur": [0.3, 0.7, 0.8, 0.4, 0.6, 0.5, 0.9, 0.8, 0.3, 0.7],
                "tableau": [0.2, 0.6, 0.7, 0.3, 0.5, 0.4, 0.8, 0.7, 0.2, 0.6],
                "m√©canicien": [0.8, 0.3, 0.2, 0.9, 0.4, 0.8, 0.1, 0.0, 0.8, 0.3],
                "cl√©": [0.7, 0.2, 0.1, 0.8, 0.3, 0.7, 0.0, 0.1, 0.7, 0.2],
                
                // Temps
                "hier": [0.1, 0.2, 0.3, 0.0, 0.1, 0.2, 0.4, 0.5, 0.1, 0.2],
                "aujourd'hui": [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],
                "demain": [0.9, 0.8, 0.7, 0.9, 0.8, 0.7, 0.6, 0.5, 0.9, 0.8],
                "matin": [0.7, 0.8, 0.9, 0.6, 0.7, 0.8, 0.9, 0.7, 0.7, 0.8],
                "soir": [0.3, 0.2, 0.1, 0.4, 0.3, 0.2, 0.1, 0.3, 0.3, 0.2],
                "printemps": [0.2, 0.8, 0.3, 0.4, 0.9, 0.2, 0.5, 0.8, 0.2, 0.8],
                "automne": [0.8, 0.2, 0.7, 0.6, 0.1, 0.8, 0.5, 0.2, 0.8, 0.2],
                
                // Actions courantes
                "manger": [0.6, 0.4, 0.2, 0.8, 0.7, 0.9, 0.3, 0.1, 0.6, 0.4],
                "boire": [0.5, 0.3, 0.1, 0.7, 0.6, 0.8, 0.2, 0.0, 0.5, 0.3],
                "dormir": [0.2, 0.1, 0.8, 0.3, 0.0, 0.4, 0.9, 0.8, 0.2, 0.1],
                "courir": [0.8, 0.2, 0.1, 0.9, 0.3, 0.1, 0.0, 0.2, 0.8, 0.2],
                "marcher": [0.6, 0.4, 0.3, 0.7, 0.5, 0.4, 0.2, 0.4, 0.6, 0.4],
                "voler": [0.3, 0.8, 0.9, 0.4, 0.2, 0.1, 0.9, 0.8, 0.3, 0.8],
                "nager": [0.4, 0.6, 0.8, 0.5, 0.7, 0.9, 0.8, 0.6, 0.4, 0.6],
                
                // Objets du quotidien
                "livre": [0.3, 0.7, 0.8, 0.2, 0.6, 0.5, 0.9, 0.8, 0.3, 0.7],
                "stylo": [0.2, 0.6, 0.7, 0.1, 0.5, 0.4, 0.8, 0.7, 0.2, 0.6],
                "table": [0.7, 0.5, 0.3, 0.8, 0.6, 0.4, 0.2, 0.1, 0.7, 0.5],
                "chaise": [0.6, 0.4, 0.2, 0.7, 0.5, 0.3, 0.1, 0.0, 0.6, 0.4],
                "voiture": [0.8, 0.3, 0.2, 0.9, 0.4, 0.1, 0.0, 0.2, 0.8, 0.3],
                "v√©lo": [0.7, 0.4, 0.3, 0.8, 0.5, 0.2, 0.1, 0.3, 0.7, 0.4],
                "maison": [0.6, 0.7, 0.8, 0.5, 0.8, 0.9, 0.7, 0.6, 0.6, 0.7],
                "porte": [0.5, 0.6, 0.7, 0.4, 0.7, 0.8, 0.6, 0.5, 0.5, 0.6],
                "fen√™tre": [0.4, 0.8, 0.9, 0.3, 0.9, 0.7, 0.8, 0.9, 0.4, 0.8],
                
                // √âmotions
                "joie": [0.9, 0.8, 0.7, 0.9, 0.9, 0.8, 0.7, 0.8, 0.9, 0.8],
                "tristesse": [0.1, 0.2, 0.3, 0.1, 0.1, 0.2, 0.3, 0.2, 0.1, 0.2],
                "col√®re": [0.9, 0.1, 0.0, 0.8, 0.0, 0.1, 0.0, 0.1, 0.9, 0.1],
                "peur": [0.2, 0.1, 0.8, 0.3, 0.0, 0.9, 0.8, 0.9, 0.2, 0.1],
                "amour": [0.9, 0.9, 0.8, 0.9, 0.8, 0.7, 0.8, 0.9, 0.9, 0.9],
                "haine": [0.1, 0.0, 0.2, 0.0, 0.1, 0.0, 0.1, 0.0, 0.1, 0.0],
                
                // Nourriture
                "pain": [0.8, 0.7, 0.5, 0.9, 0.8, 0.6, 0.4, 0.3, 0.8, 0.7],
                "eau": [0.1, 0.1, 0.9, 0.0, 0.0, 0.8, 0.9, 0.8, 0.1, 0.1],
                "pomme": [0.8, 0.2, 0.1, 0.7, 0.9, 0.0, 0.2, 0.1, 0.8, 0.2],
                "fromage": [0.9, 0.9, 0.7, 0.8, 0.8, 0.6, 0.5, 0.4, 0.9, 0.9],
                "viande": [0.8, 0.2, 0.1, 0.9, 0.7, 0.8, 0.0, 0.1, 0.8, 0.2],
                "l√©gume": [0.0, 0.9, 0.2, 0.1, 0.8, 0.1, 0.3, 0.2, 0.0, 0.9],
                "fruit": [0.7, 0.8, 0.2, 0.6, 0.9, 0.1, 0.3, 0.2, 0.7, 0.8],
                
                // Nature
                "soleil": [0.9, 0.9, 0.0, 0.9, 0.9, 0.0, 0.1, 0.2, 0.9, 0.9],
                "lune": [0.8, 0.8, 0.9, 0.7, 0.7, 0.8, 0.9, 0.9, 0.8, 0.8],
                "√©toile": [0.9, 0.9, 0.8, 0.8, 0.8, 0.7, 0.9, 0.9, 0.9, 0.9],
                "mer": [0.0, 0.2, 0.9, 0.1, 0.1, 0.8, 0.9, 0.8, 0.0, 0.2],
                "montagne": [0.5, 0.3, 0.2, 0.8, 0.6, 0.4, 0.1, 0.0, 0.5, 0.3],
                "for√™t": [0.0, 0.9, 0.2, 0.1, 0.8, 0.1, 0.3, 0.2, 0.0, 0.9],
                "fleur": [0.8, 0.9, 0.7, 0.7, 0.9, 0.6, 0.8, 0.9, 0.8, 0.9],
                "arbre": [0.2, 0.9, 0.3, 0.3, 0.8, 0.2, 0.4, 0.3, 0.2, 0.9],
                
                // Corps humain
                "t√™te": [0.7, 0.6, 0.5, 0.8, 0.7, 0.6, 0.5, 0.4, 0.7, 0.6],
                "main": [0.6, 0.5, 0.4, 0.7, 0.6, 0.5, 0.4, 0.3, 0.6, 0.5],
                "pied": [0.5, 0.4, 0.3, 0.6, 0.5, 0.4, 0.3, 0.2, 0.5, 0.4],
                "≈ìil": [0.4, 0.7, 0.8, 0.3, 0.6, 0.7, 0.8, 0.9, 0.4, 0.7],
                "oreille": [0.3, 0.6, 0.7, 0.2, 0.5, 0.6, 0.7, 0.8, 0.3, 0.6],
                "bouche": [0.8, 0.5, 0.2, 0.9, 0.4, 0.1, 0.0, 0.3, 0.8, 0.5],
                "nez": [0.7, 0.4, 0.1, 0.8, 0.3, 0.0, 0.1, 0.2, 0.7, 0.4],
                
                // Mots suppl√©mentaires pour atteindre 100+
                "√©cole": [0.3, 0.7, 0.8, 0.2, 0.6, 0.5, 0.9, 0.8, 0.3, 0.7],
                "travail": [0.6, 0.4, 0.3, 0.7, 0.5, 0.4, 0.2, 0.1, 0.6, 0.4],
                "argent": [0.9, 0.8, 0.0, 0.9, 0.7, 0.0, 0.1, 0.2, 0.9, 0.8],
                "temps": [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],
                "vie": [0.7, 0.8, 0.9, 0.6, 0.9, 0.8, 0.9, 0.8, 0.7, 0.8],
                "mort": [0.1, 0.0, 0.2, 0.0, 0.0, 0.1, 0.2, 0.1, 0.1, 0.0],
                "paix": [0.2, 0.8, 0.9, 0.1, 0.9, 0.7, 0.9, 0.8, 0.2, 0.8],
                "guerre": [0.9, 0.1, 0.0, 0.8, 0.0, 0.2, 0.0, 0.1, 0.9, 0.1],
                "ami": [0.7, 0.8, 0.6, 0.8, 0.9, 0.7, 0.6, 0.5, 0.7, 0.8],
                "ennemi": [0.8, 0.2, 0.1, 0.9, 0.1, 0.3, 0.0, 0.2, 0.8, 0.2]
            };
            
            // √âtendre le dictionnaire avec plus de mots pour atteindre 1000
            const additionalWords = generateAdditionalWords();
            
            // Combiner les mots de base avec les mots suppl√©mentaires
            const allWords = {...words, ...additionalWords};
            
            // Convertir en embeddings de 50 dimensions
            for (const [word, baseVector] of Object.entries(allWords)) {
                embeddings[word] = expandVector(baseVector, 50);
                vocabulary.push(word);
            }
            
            document.getElementById('wordCount').textContent = vocabulary.length;
        }
        
        function generateAdditionalWords() {
            const categories = {
                // Verbes d'action
                actions: ['parler', '√©couter', 'regarder', 'toucher', 'sentir', 'go√ªter', 'penser', 'r√©fl√©chir', 'comprendre', 'apprendre', 'enseigner', 'cr√©er', 'construire', 'd√©truire', 'r√©parer', 'nettoyer', 'cuisiner', 'jouer', 'rire', 'pleurer', 'danser', 'chanter', 'dessiner', 'peindre', '√©crire', 'lire', 'voyager', 'rester', 'partir', 'arriver', 'commencer', 'finir', 'continuer', 'arr√™ter', 'ouvrir', 'fermer', 'entrer', 'sortir', 'monter', 'descendre', 'tomber', 'lever', 'asseoir', 'attendre', 'chercher', 'trouver', 'perdre', 'gagner', 'donner', 'recevoir', 'prendre', 'porter', 'jeter', 'ramasser', 'pousser', 'tirer', 'casser', 'r√©parer'],
                
                // Objets domestiques
                objets: ['t√©l√©vision', 'ordinateur', 't√©l√©phone', 'lit', 'armoire', 'frigo', 'four', 'micro-onde', 'lave-linge', 'aspirateur', 'lampe', 'miroir', 'tapis', 'rideau', 'coussin', 'couverture', 'oreiller', 'serviette', 'brosse', 'peigne', 'savon', 'shampoing', 'dentifrice', 'brosse-√†-dents', 'lunettes', 'montre', 'bijou', 'cl√©', 'portefeuille', 'sac', 'chaussure', 'chaussette', 'pantalon', 'chemise', 'robe', 'jupe', 'manteau', 'chapeau', '√©charpe', 'gant'],
                
                // Lieux
                lieux: ['ville', 'village', 'rue', 'avenue', 'place', 'parc', 'jardin', 'for√™t', 'montagne', 'plage', 'rivi√®re', 'lac', 'oc√©an', 'd√©sert', 'h√¥tel', 'restaurant', 'caf√©', 'magasin', 'supermarch√©', 'banque', 'poste', 'h√¥pital', 'pharmacie', 'cin√©ma', 'th√©√¢tre', 'mus√©e', 'biblioth√®que', 'universit√©', '√©cole', 'bureau', 'usine', 'gare', 'a√©roport', 'pont', 'tunnel', '√©glise', 'ch√¢teau', 'prison', 'stade', 'piscine'],
                
                // M√©tiers
                metiers: ['professeur', 'm√©decin', 'infirmier', 'policier', 'pompier', 'avocat', 'juge', 'ing√©nieur', 'architecte', 'artiste', 'musicien', 'acteur', '√©crivain', 'journaliste', 'photographe', 'cuisinier', 'serveur', 'vendeur', 'chauffeur', 'pilote', 'marin', 'fermier', 'jardinier', 'm√©canicien', '√©lectricien', 'plombier', 'coiffeur', 'dentiste', 'v√©t√©rinaire', 'comptable', 'secr√©taire', 'directeur', 'ouvrier', 'scientifique', 'chercheur', '√©tudiant', 'retrait√©', 'ch√¥meur'],
                
                // Sciences et nature
                nature: ['plan√®te', 'univers', 'galaxie', 'com√®te', 'm√©t√©ore', 'satellite', 'atome', 'mol√©cule', '√©lectron', 'proton', 'neutron', '√©nergie', 'force', 'gravit√©', 'lumi√®re', 'son', 'chaleur', 'froid', '√©lectricit√©', 'magn√©tisme', 'chimie', 'physique', 'biologie', 'g√©ologie', 'astronomie', 'math√©matiques', 'g√©om√©trie', 'alg√®bre', 'calcul', 'statistique', 'probabilit√©', 'th√©orie', 'hypoth√®se', 'exp√©rience', 'r√©sultat', 'conclusion'],
                
                // Sentiments et concepts abstraits
                abstraits: ['bonheur', 'malheur', 'espoir', 'd√©sespoir', 'confiance', 'm√©fiance', 'courage', 'l√¢chet√©', 'g√©n√©rosit√©', '√©go√Øsme', 'patience', 'impatience', 'calme', 'nervosit√©', 'stress', 'relaxation', 'fatigue', '√©nergie', 'force', 'faiblesse', 'sant√©', 'maladie', 'beaut√©', 'laideur', 'intelligence', 'stupidit√©', 'sagesse', 'folie', 'v√©rit√©', 'mensonge', 'justice', 'injustice', 'libert√©', 'prison', '√©galit√©', 'in√©galit√©', 'progr√®s', 'r√©gression', 'succ√®s', '√©chec', 'victoire', 'd√©faite', 'd√©but', 'fin'],
                
                // Transport et v√©hicules
                transport: ['voiture', 'camion', 'autobus', 'm√©tro', 'tramway', 'train', 'avion', 'h√©licopt√®re', 'bateau', 'navire', 'v√©lo', 'moto', 'scooter', 'taxi', 'ambulance', 'camion-pompe', 'tracteur', 'bulldozer', 'grue', 'fus√©e', 'satellite', 'sous-marin', 'yacht', 'voilier', 'canot', 'kayak', 'planche', 'ski', 'patins', 'trottinette'],
                
                // Arts et culture
                arts: ['peinture', 'sculpture', 'musique', 'danse', 'th√©√¢tre', 'cin√©ma', 'litt√©rature', 'po√©sie', 'roman', 'nouvelle', 'conte', 'fable', 'l√©gende', 'mythe', 'histoire', 'biographie', 'autobiographie', 'journal', 'magazine', 'journal', 'radio', 't√©l√©vision', 'internet', 'site', 'blog', 'r√©seau', 'social', 'communication', 'information', 'nouvelle', 'actualit√©'],
                
                // Sports et loisirs
                sports: ['football', 'basketball', 'tennis', 'golf', 'natation', 'course', 'cyclisme', 'ski', 'snowboard', 'surf', 'voile', 'escalade', 'randonn√©e', 'camping', 'p√™che', 'chasse', 'photographie', 'jardinage', 'lecture', '√©criture', 'dessin', 'peinture', 'musique', 'chant', 'danse', 'cuisine', 'couture', 'tricot', 'bricolage', 'collection', 'voyage', 'aventure'],
                
                // Technologie moderne
                tech: ['ordinateur', 'smartphone', 'tablette', 'internet', 'email', 'message', 'application', 'logiciel', 'programme', 'code', 'algorithme', 'donn√©es', 'fichier', 'dossier', 'document', 'image', 'vid√©o', 'audio', 'musique', 'film', 'photo', 'cam√©ra', 'micro', 'haut-parleur', '√©cran', 'clavier', 'souris', 'imprimante', 'scanner', 'robot', 'intelligence-artificielle', 'machine', 'automatisation'],
                
                // Nourriture d√©taill√©e
                cuisine: ['petit-d√©jeuner', 'd√©jeuner', 'd√Æner', 'collation', 'ap√©ritif', 'dessert', 'entr√©e', 'plat', 'salade', 'soupe', 'sandwich', 'pizza', 'p√¢tes', 'riz', 'bl√©', 'avoine', 'orge', 'ma√Øs', 'pomme-de-terre', 'carotte', 'tomate', 'oignon', 'ail', 'persil', 'basilic', 'thym', 'romarin', 'sel', 'poivre', 'sucre', 'miel', 'huile', 'vinaigre', 'beurre', 'cr√®me', 'lait', 'yaourt', '≈ìuf', 'poisson', 'poulet', 'b≈ìuf', 'porc', 'agneau'],
                
                // Mat√©riaux et textures
                materiaux: ['bois', 'm√©tal', 'plastique', 'verre', 'c√©ramique', 'pierre', 'marbre', 'granite', 'sable', 'terre', 'argile', 'tissu', 'coton', 'laine', 'soie', 'lin', 'cuir', 'fourrure', 'plume', 'papier', 'carton', 'caoutchouc', 'mousse', 'gel', 'liquide', 'gaz', 'vapeur', 'fum√©e', 'poussi√®re', 'poudre'],
                
                // Formes et dimensions
                formes: ['rond', 'carr√©', 'triangle', 'rectangle', 'ovale', 'losange', '√©toile', 'c≈ìur', 'croix', 'cercle', 'ligne', 'point', 'courbe', 'angle', 'c√¥t√©', 'surface', 'volume', 'longueur', 'largeur', 'hauteur', 'profondeur', '√©paisseur', 'diam√®tre', 'rayon', 'p√©rim√®tre', 'aire', 'espace', 'distance', 'proximit√©', '√©loignement'],
                
                // Saisons et m√©t√©o
                meteo: ['printemps', '√©t√©', 'automne', 'hiver', 'chaud', 'froid', 'ti√®de', 'frais', 'gel', 'neige', 'glace', 'pluie', 'orage', '√©clair', 'tonnerre', 'vent', 'brise', 'temp√™te', 'ouragan', 'cyclone', 'tornade', 'brouillard', 'nuage', 'ciel', 'soleil', 'ombre', 'lumi√®re', 'obscurit√©', 'aube', 'cr√©puscule', 'midi', 'minuit'],
                
                // Nombres et math√©matiques
                nombres: ['z√©ro', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf', 'dix', 'cent', 'mille', 'million', 'milliard', 'premier', 'deuxi√®me', 'troisi√®me', 'dernier', 'moiti√©', 'tiers', 'quart', 'double', 'triple', 'addition', 'soustraction', 'multiplication', 'division', '√©gal', 'plus', 'moins', 'fois', 'par'],
                
                // Directions et positions
                directions: ['nord', 'sud', 'est', 'ouest', 'gauche', 'droite', 'devant', 'derri√®re', 'dessus', 'dessous', 'int√©rieur', 'ext√©rieur', 'centre', 'bord', 'coin', 'milieu', 'd√©but', 'fin', 'entre', 'parmi', 'avec', 'sans', 'contre', 'pour', 'vers', 'depuis', 'jusqu'],
                
                // Qualit√©s et d√©fauts
                qualites: ['bon', 'mauvais', 'beau', 'laid', 'intelligent', 'stupide', 'gentil', 'm√©chant', 'dr√¥le', 'triste', 'rapide', 'lent', 'fort', 'faible', 'dur', 'mou', 'chaud', 'froid', 'sec', 'humide', 'propre', 'sale', 'neuf', 'vieux', 'jeune', '√¢g√©', 'riche', 'pauvre', 'facile', 'difficile', 'simple', 'compliqu√©', 'clair', 'sombre', 'l√©ger', 'lourd']
            };
            
            const additionalWords = {};
            let totalCount = 0;
            
            for (const [category, words] of Object.entries(categories)) {
                for (let i = 0; i < words.length && totalCount < 900; i++) {
                    const word = words[i];
                    if (!embeddings[word]) {
                        // G√©n√©rer un embedding bas√© sur la cat√©gorie
                        additionalWords[word] = generateCategoryEmbedding(category, i, words.length);
                        totalCount++;
                    }
                }
            }
            
            return additionalWords;
        }
        
        function generateCategoryEmbedding(category, index, total) {
            const baseVectors = {
                actions: [0.6, 0.3, 0.1, 0.8, 0.4, 0.2, 0.1, 0.5, 0.7, 0.3],
                objets: [0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.4, 0.4, 0.5, 0.5],
                lieux: [0.4, 0.7, 0.8, 0.3, 0.6, 0.7, 0.8, 0.6, 0.4, 0.7],
                metiers: [0.7, 0.6, 0.5, 0.8, 0.7, 0.6, 0.5, 0.4, 0.7, 0.6],
                nature: [0.2, 0.8, 0.6, 0.1, 0.9, 0.5, 0.7, 0.8, 0.2, 0.8],
                abstraits: [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],
                transport: [0.8, 0.3, 0.2, 0.9, 0.4, 0.1, 0.0, 0.2, 0.8, 0.3],
                arts: [0.3, 0.8, 0.9, 0.2, 0.7, 0.8, 0.9, 0.8, 0.3, 0.8],
                sports: [0.9, 0.4, 0.2, 0.8, 0.5, 0.3, 0.1, 0.4, 0.9, 0.4],
                tech: [0.7, 0.5, 0.8, 0.8, 0.6, 0.9, 0.8, 0.7, 0.7, 0.5],
                cuisine: [0.8, 0.6, 0.3, 0.9, 0.7, 0.4, 0.2, 0.3, 0.8, 0.6],
                materiaux: [0.6, 0.4, 0.2, 0.7, 0.5, 0.3, 0.1, 0.2, 0.6, 0.4],
                formes: [0.5, 0.6, 0.7, 0.4, 0.7, 0.8, 0.6, 0.5, 0.5, 0.6],
                meteo: [0.4, 0.7, 0.9, 0.3, 0.8, 0.9, 0.9, 0.8, 0.4, 0.7],
                nombres: [0.8, 0.8, 0.8, 0.7, 0.7, 0.7, 0.6, 0.6, 0.8, 0.8],
                directions: [0.6, 0.5, 0.4, 0.7, 0.6, 0.5, 0.4, 0.3, 0.6, 0.5],
                qualites: [0.7, 0.7, 0.6, 0.8, 0.8, 0.7, 0.6, 0.5, 0.7, 0.7]
            };
            
            const base = baseVectors[category] || [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5];
            const variation = index / total * 0.4 - 0.2; // Variation de -0.2 √† +0.2
            
            return base.map(val => Math.max(0, Math.min(1, val + variation + (Math.random() - 0.5) * 0.1)));
        }
        
        function expandVector(baseVector, targetDimension) {
            const expanded = [...baseVector];
            while (expanded.length < targetDimension) {
                // Ajouter des dimensions bas√©es sur les valeurs existantes avec variation
                const baseIndex = expanded.length % baseVector.length;
                const noise = (Math.random() - 0.5) * 0.2; // Bruit l√©ger
                expanded.push(Math.max(0, Math.min(1, baseVector[baseIndex] + noise)));
            }
            return expanded;
        }
        
        function cosineSimilarity(vecA, vecB) {
            let dotProduct = 0;
            let normA = 0;
            let normB = 0;
            
            for (let i = 0; i < vecA.length; i++) {
                dotProduct += vecA[i] * vecB[i];
                normA += vecA[i] * vecA[i];
                normB += vecB[i] * vecB[i];
            }
            
            return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
        }
        
        function vectorSubtract(vecA, vecB) {
            return vecA.map((val, i) => val - vecB[i]);
        }
        
        function vectorAdd(vecA, vecB) {
            return vecA.map((val, i) => val + vecB[i]);
        }
        
        function findClosestWords(targetVector, excludeWords = [], topN = 10) {
            const similarities = [];
            
            for (const word of vocabulary) {
                if (!excludeWords.includes(word)) {
                    const similarity = cosineSimilarity(targetVector, embeddings[word]);
                    similarities.push({word, similarity});
                }
            }
            
            similarities.sort((a, b) => b.similarity - a.similarity);
            return similarities.slice(0, topN);
        }
        
        function calculerAnalogie() {
            const wordA = document.getElementById('wordA').value.toLowerCase().trim();
            const wordB = document.getElementById('wordB').value.toLowerCase().trim();
            const wordC = document.getElementById('wordC').value.toLowerCase().trim();
            
            if (!wordA || !wordB || !wordC) {
                alert('Veuillez remplir tous les champs !');
                return;
            }
            
            if (!embeddings[wordA] || !embeddings[wordB] || !embeddings[wordC]) {
                const missing = [wordA, wordB, wordC].filter(w => !embeddings[w]);
                alert(`Mots non trouv√©s dans la base : ${missing.join(', ')}`);
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            
            setTimeout(() => {
                // Calcul vectoriel : A - B + C
                const vecA = embeddings[wordA];
                const vecB = embeddings[wordB];
                const vecC = embeddings[wordC];
                
                const diff = vectorSubtract(vecA, vecB);
                const result = vectorAdd(diff, vecC);
                
                // Trouver les mots les plus proches
                const closest = findClosestWords(result, [wordA, wordB, wordC], 10);
                const bestMatch = closest[0];
                
                // Afficher le r√©sultat
                document.getElementById('result').value = bestMatch.word;
                document.getElementById('resultText').innerHTML = 
                    `<strong style="font-size: 1.5em; color: #667eea;">${bestMatch.word}</strong>
                     <br><br><em>"${wordA} est √† ${wordB} ce que ${wordC} est √† <strong>${bestMatch.word}</strong>"</em>`;
                
                document.getElementById('similarityScore').innerHTML = 
                    `Score de similarit√© : <strong>${(bestMatch.similarity * 100).toFixed(1)}%</strong>`;
                
                // Afficher les mots proches
                const wordList = closest.map(item => 
                    `<span class="word-badge">${item.word} (${(item.similarity * 100).toFixed(1)}%)</span>`
                ).join('');
                document.getElementById('wordList').innerHTML = wordList;
                
                // Mettre √† jour les stats
                stats.total++;
                stats.scoreSum += bestMatch.similarity;
                if (bestMatch.similarity > 0.7) stats.successes++;
                
                updateStats();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultSection').style.display = 'block';
            }, 500);
        }
        
        function updateStats() {
            document.getElementById('totalAnalogies').textContent = stats.total;
            const successRate = stats.total > 0 ? (stats.successes / stats.total * 100).toFixed(1) : '0';
            document.getElementById('successRate').textContent = successRate + '%';
            const averageScore = stats.total > 0 ? (stats.scoreSum / stats.total).toFixed(2) : '0.0';
            document.getElementById('averageScore').textContent = averageScore;
        }
        
        function motAleatoire() {
            const randomWords = [];
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * vocabulary.length);
                randomWords.push(vocabulary[randomIndex]);
            }
            
            document.getElementById('wordA').value = randomWords[0];
            document.getElementById('wordB').value = randomWords[1];
            document.getElementById('wordC').value = randomWords[2];
            document.getElementById('result').value = '';
            document.getElementById('resultSection').style.display = 'none';
        }
        
        function reset() {
            document.getElementById('wordA').value = '';
            document.getElementById('wordB').value = '';
            document.getElementById('wordC').value = '';
            document.getElementById('result').value = '';
            document.getElementById('resultSection').style.display = 'none';
        }
        
        // Autocompl√©tion
        function setupAutocomplete() {
            ['A', 'B', 'C'].forEach(letter => {
                const input = document.getElementById(`word${letter}`);
                const suggestions = document.getElementById(`suggestions${letter}`);
                
                input.addEventListener('input', function() {
                    const value = this.value.toLowerCase();
                    if (value.length < 2) {
                        suggestions.style.display = 'none';
                        return;
                    }
                    
                    const matches = vocabulary.filter(word => 
                        word.startsWith(value)).slice(0, 8);
                    
                    if (matches.length > 0) {
                        suggestions.innerHTML = matches.map(word => 
                            `<div class="suggestion-item" onclick="selectSuggestion('${letter}', '${word}')">${word}</div>`
                        ).join('');
                        suggestions.style.display = 'block';
                    } else {
                        suggestions.style.display = 'none';
                    }
                });
                
                input.addEventListener('blur', function() {
                    setTimeout(() => suggestions.style.display = 'none', 200);
                });
            });
        }
        
        function selectSuggestion(letter, word) {
            document.getElementById(`word${letter}`).value = word;
            document.getElementById(`suggestions${letter}`).style.display = 'none';
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            generateSemanticEmbeddings();
            setupAutocomplete();
            updateStats();
            
            // Exemples par d√©faut
            document.getElementById('wordA').value = 'roi';
            document.getElementById('wordB').value = 'reine';
            document.getElementById('wordC').value = 'homme';
        });
        
        // Permettre de presser Entr√©e pour calculer
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculerAnalogie();
            }
        });
    </script>
</body>
</html>